########################################
#          DEFINITIONS & MOD KEYS      #
########################################

$mainMod = SUPER
$terminal = cool-retro-term
$editor = neovim
$browser = firefox

########################################
#          GLOBAL KEYBINDINGS          #
########################################

bind = $mainMod, K, killactive
bind = $mainMod, D, exec, wofi 
bind = $mainMod, Q, exec, firefox
bind = CTRL+SUPER, R, exec, systemctl reboot
bind = $mainMod, W, hyprexpo:expo, toggle
bind = $mainMod, T, togglesplit
bind = $mainMod, N, exec, pypr toggle_special stash
bind = $mainMod, G, exec, pypr toggle term
bind = $mainMod, Y, exec, pypr attach
bind = $mainMod, R, exec, hyprctl reload
bind = $mainMod, Space, fullscreen

# Pyprland Integrations
bind = $mainMod, Z, exec, pypr zoom
bind = $mainMod, left, exec, pypr layout_center prev
bind = $mainMod, right, exec, pypr layout_center next
bind = $mainMod, up, exec, pypr layout_center prev2
bind = $mainMod, down, exec, pypr layout_center next2
bind = $mainMod, M, exec, pypr layout_center toggle

workspace = special:exposed,gapsout:60,gapsin:30,bordersize:5,border:true,shadow:false
bind = SUPER, v, easymotion, action:hyprctl dispatch focuswindow address:{}
########################################
#          SUBMAPS DEFINITION          #
########################################

bind = $mainMod, f, submap, core_mod
bind = $mainMod, h, submap, core_mod

# --- core_mod Submap (Main Mode) ---
submap = core_mod
    bind = , t, layoutmsg, togglesplit; submap, reset
    bind = , x, layoutmsg, swapsplit; submap, reset
    bind = , p, layoutmsg, promote; submap, reset

    # Layout Fit/Togglefit
    bind = , i, layoutmsg, togglefit; submap, reset
    bind = SHIFT, i, layoutmsg, fit active; submap, reset

    # Layout View Scroll
    bind = CTRL, h, layoutmsg, move -col; submap, reset
    bind = CTRL, left, layoutmsg, move -col; submap, reset
    bind = CTRL, l, layoutmsg, move +col; submap, reset
    bind = CTRL, right, layoutmsg, move +col; submap, reset

    # Application Launchers
    bind = , Return, exec, cool-retro-term; submap, reset
    bind = , e, exec, emacs; submap, reset
    bind = , n, exec, nyxt; submap, reset

    # Enter specialized submaps
    bind = , f, submap, focus_mode
    bind = , r, submap, resize_mode
    bind = , s, submap, swap_mode
    bind = , w, submap, workspace_mode
    bind = , q, submap, quit_mode

    # Exit core_mod
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- focus_mode Submap ---
submap = focus_mode
    bind = , h, movefocus, l
    bind = , left, movefocus, l
    bind = , l, movefocus, r
    bind = , right, movefocus, r
    bind = , k, movefocus, u
    bind = , up, movefocus, u
    bind = , j, movefocus, d
    bind = , down, movefocus, d
    bind = , Space, fullscreen
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- resize_mode Submap ---
submap = resize_mode
    # Column Resize (Relative - bare keys)
    binde = , h, layoutmsg, colresize -0.025
    binde = , left, layoutmsg, colresize -0.025
    binde = , l, layoutmsg, colresize +0.025
    binde = , right, layoutmsg, colresize +0.025
    
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- swap_mode Submap ---
submap = swap_mode
    # Column Swap
    bind = , h, layoutmsg, swapcol l
    bind = , left, layoutmsg, swapcol l
    bind = , l, layoutmsg, swapcol r
    bind = , right, layoutmsg, swapcol r

    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- workspace_mode Submap ---
submap = workspace_mode
    # Switch to workspace
    bind = , 1, workspace, 1
    bind = , 2, workspace, 2
    bind = , 3, workspace, 3
    bind = , 4, workspace, 4
    bind = , 5, workspace, 5
    bind = , 6, workspace, 6
    bind = , 7, workspace, 7
    bind = , 8, workspace, 8
    bind = , 9, workspace, 9
    bind = , 0, workspace, 10

    # Move window to workspace (SHIFT)
    bind = SHIFT, 1, movetoworkspace, 1
    bind = SHIFT, 2, movetoworkspace, 2
    bind = SHIFT, 3, movetoworkspace, 3
    bind = SHIFT, 4, movetoworkspace, 4
    bind = SHIFT, 5, movetoworkspace, 5
    bind = SHIFT, 6, movetoworkspace, 6
    bind = SHIFT, 7, movetoworkspace, 7
    bind = SHIFT, 8, movetoworkspace, 8
    bind = SHIFT, 9, movetoworkspace, 9
    bind = SHIFT, 0, movetoworkspace, 10

    # Move Column to Workspace (CTRL)
    bind = CTRL, 1, layoutmsg, movecoltoworkspace 1
    bind = CTRL, 2, layoutmsg, movecoltoworkspace 2
    bind = CTRL, 3, layoutmsg, movecoltoworkspace 3
    bind = CTRL, 4, layoutmsg, movecoltoworkspace 4
    bind = CTRL, 5, layoutmsg, movecoltoworkspace 5
    bind = CTRL, 6, layoutmsg, movecoltoworkspace 6
    bind = CTRL, 7, layoutmsg, movecoltoworkspace 7
    bind = CTRL, 8, layoutmsg, movecoltoworkspace 8
    bind = CTRL, 9, layoutmsg, movecoltoworkspace 9
    bind = CTRL, 0, layoutmsg, movecoltoworkspace 10

    # Navigate next/prev workspace
    bind = , l, workspace, e+1
    bind = , right, workspace, e+1
    bind = , h, workspace, e-1
    bind = , left, workspace, e-1

    bind = SHIFT, l, movetoworkspace, e+1
    bind = SHIFT, right, movetoworkspace, e+1
    bind = SHIFT, h, movetoworkspace, e-1
    bind = SHIFT, left, movetoworkspace, e-1
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- quit_mode Submap ---
submap = quit_mode
    bind = , q, exec, hyprctl dispatch exit
    bind = , p, exec, systemctl poweroff
    bind = , r, exec, systemctl reboot
    bind = , s, exec, systemctl suspend
    bind = , l, exec, hyprlock
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- Submap Reset ---
submap = reset

