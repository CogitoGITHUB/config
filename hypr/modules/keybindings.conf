# This Hyprland configuration is tailored to work seamlessly
# with your Kanata keyboard remapper setup.
#
# ---
#=== Kanata Tap-Hold Explanations ===
# Your Kanata configuration transforms your home row keys into powerful modifier keys when held,
# while retaining their original letter function when tapped.
#
# When held down, the following home row keys become:
# - 'a' (left ring finger)   -> Left SUPER (lmet)
# - 's' (left middle finger) -> Left ALT (lalt)
# - 'd' (left index finger)  -> Left SHIFT (lsft)
# - 'f' (left index finger)  -> Left CTRL (lctl)
# - 'j' (right index finger) -> Right CTRL (rctl)
# - 'k' (right middle finger) -> Right SHIFT (rsft)
# - 'l' (right ring finger)  -> Right ALT (ralt)
# - ';' (right pinky)        -> Right SUPER (rmet)
#
# Throughout this file, comments like "Physical: (Hold A) + Tap J" will indicate
# the actual finger movements required due to your Kanata setup.
#
# ---
# === Hyprland Keybinding Philosophy ===
# This configuration leverages the above Kanata mappings for:
# - Highly ergonomic key combinations, primarily using your home row.
# - Consistent patterns for window management actions (focus, resize, move).
# - Minimizing finger travel by grouping related actions to specific modifier combos.
# - A "two-stage" approach for complex actions (e.g., Dwindle preselection),
#   where an initial key combo enters a mode, then simple taps perform actions.

# ---
# === Note on Advanced Features (e.g., Scratchpads, Expose) ===
# For advanced window management features like true scratchpads (that launch
# if not running), "expose" views, or more flexible workspace handling,
# external tools like Pyprland (https://github.com/hyprland-community/pyprland)
# are highly recommended. This configuration assumes Pyprland is used for these features.
# Specific Pyprland keybindings are included, but ensure Pyprland is running as a daemon
# and its `exec-once` call is managed externally.
#
# ---

########################################
#          APP DEFINITIONS & MOD KEYS         #
########################################

# Sets "Windows" key as the main modifier
$mainMod = SUPER 

# Define your preferred applications
$terminal = kitty
$editor = neovim
$browser = firefox


########################################
#          GLOBAL KEYBINDINGS         #
########################################

bind = SUPER, K, killactive

bind = $mainMod, D, exec, rofi -show drun

# Show/hide Waybar without killing it
#bind = SUPER, W, exec, pkill -SIGUSR1 waybar

# Launch Firefox
bind = SUPER, Q, exec, firefox

# Reboot system (CTRL+SUPER+R)
bind = CTRL+SUPER, R, exec, systemctl reboot


bind = $mainMod, T, togglesplit,  # Example: Use Super + T to toggle split orientation

bind = $mainMod, N, exec, pypr toggle_special stash # moves window to/from the "stash" workspace

# Keybind for your term scratchpad
bind = $mainMod, G, exec, pypr toggle term

# The SINGLE keybind for the 'attach' command
bind = $mainMod, Y, exec, pypr attach

bind = $mainMod, R, exec, hyprctl reload

# Toggle Fullscreen (Standalone Keybind)
# Physical: (Hold A) + Tap F
bind = $mainMod, Space, fullscreen

# --- Pyprland Integrations ---
# Visit the Pyprland website for more information on shortcuts and multi-menu configurations!

# Alternative multi-monitor workspace switcher (previous)
# Physical: (Hold A) + Tap J
#bind = $mainMod, J, exec, pypr change_workspace -1

# Alternative multi-monitor workspace switcher (next)
# Physical: (Hold A) + Tap K
#bind = $mainMod, K, exec, pypr change_workspace +1

# Swap workspaces between monitors
# Physical: (Hold A) + (Hold D) + Tap O
#bind = $mainMod SHIFT, O, exec, pypr shift_monitors +1

# Zoom in the focused workspace
# Physical: (Hold A) + (Hold D) + Tap Z
#bind = $mainMod SHIFT, Z, exec, pypr zoom ++0.5

# Toggle zooming
# Physical: (Hold A) + Tap Z
bind = $mainMod, Z, exec, pypr zoom

# Expose all windows
# Physical: (Hold A) + Tap E
#bind = $mainMod, E, exec, pypr expose

# Add styling to the "exposed" workspace
workspace = special:exposed,gapsout:60,gapsin:30,bordersize:5,border:true,shadow:false

# Focus change keys for layout_center (Pyprland)
# Physical: (Hold A) + Tap Left Arrow
bind = $mainMod, left, exec, pypr layout_center prev
# Physical: (Hold A) + Tap Right Arrow
bind = $mainMod, right, exec, pypr layout_center next
# Physical: (Hold A) + Tap Up Arrow
bind = $mainMod, up, exec, pypr layout_center prev2
# Physical: (Hold A) + Tap Down Arrow
bind = $mainMod, down, exec, pypr layout_center next2

# Toggle the layout (Pyprland layout_center)
# Physical: (Hold A) + Tap M
bind = $mainMod, M, exec, pypr layout_center toggle

# Toggle a window to/from the "stash" special workspace
# Physical: (Hold A) + Tap N
#bind = $mainMod, N, exec, pypr toggle_special stash

########################################
#          SUBMAPS DEFINITION         #
########################################

# Enter core_mod submap (main entry point for advanced actions)
# Physical: (Hold A) + Tap F  OR  (Hold A) + Tap H
bind = $mainMod, f, submap, core_mod
bind = $mainMod, h, submap, core_mod

# --- core_mod Submap ---
submap = core_mod
    # Dwindle Layout Controls
    # Toggle split direction
    # Physical: Tap T
    bind = , t, layoutmsg, togglesplit; submap, reset
    # Swap split
    # Physical: Tap X
    bind = , x, layoutmsg, swapsplit; submap, reset
    # Preselect left
    # Physical: Tap H or Left Arrow
    bind = , h, layoutmsg, preselect l; submap, reset
    bind = , left, layoutmsg, preselect l; submap, reset
    # Preselect right
    # Physical: Tap L or Right Arrow
    bind = , l, layoutmsg, preselect r; submap, reset
    bind = , right, layoutmsg, preselect r; submap, reset
    # Preselect top
    # Physical: Tap K or Up Arrow
    bind = , k, layoutmsg, preselect t; submap, reset
    bind = , up, layoutmsg, preselect t; submap, reset
    # Preselect bottom
    # Physical: Tap J or Down Arrow
    bind = , j, layoutmsg, preselect b; submap, reset
    bind = , down, layoutmsg, preselect b; submap, reset

    # Application Launchers
    # Launch Terminal (Kitty)
    # Physical: Tap Return
    bind = , Return, exec, kitty; submap, reset
    # Launch Editor (Emacs)
    # Physical: Tap E
    bind = , e, exec, emacs; submap, reset
    # Launch Browser (Nyxt)
    # Physical: Tap N
    bind = , n, exec, nyxt; submap, reset

    # Enter other specialized submaps
    # Enter focus_mode
    # Physical: Tap F
    bind = , f, submap, focus_mode
    # Enter resize_mode
    # Physical: Tap R
    bind = , r, submap, resize_mode
    # Enter swap_mode
    # Physical: Tap S
    bind = , s, submap, swap_mode
    # Enter workspace_mode
    # Physical: Tap W
    bind = , w, submap, workspace_mode
    # Enter rofi_mode
    # Physical: Tap D
    # Enter quit_mode
    # Physical: Tap Q
    bind = , q, submap, quit_mode

    # Exit core_mod
    # Physical: Tap Escape or any unassigned key
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- focus_mode Submap ---
submap = focus_mode
    # Move focus left
    # Physical: Tap H or Left Arrow
    bind = , h, movefocus, l
    bind = , left, movefocus, l
    # Move focus right
    # Physical: Tap L or Right Arrow
    bind = , l, movefocus, r
    bind = , right, movefocus, r
    # Move focus up
    # Physical: Tap K or Up Arrow
    bind = , k, movefocus, u
    bind = , up, movefocus, u
    # Move focus down
    # Physical: Tap J or Down Arrow
    bind = , j, movefocus, d
    bind = , down, movefocus, d
    # Toggle Fullscreen within focus_mode
    # Physical: Tap Space
    bind = , Space, fullscreen
    # Exit focus_mode
    # Physical: Tap Escape or any unassigned key
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- resize_mode Submap ---
submap = resize_mode
    # Resize active window (small increments)
    # Physical: Tap H or Left Arrow
    binde = , h, resizeactive, -10 0
    binde = , left, resizeactive, -10 0
    # Physical: Tap L or Right Arrow
    binde = , l, resizeactive, 10 0
    binde = , right, resizeactive, 10 0
    # Physical: Tap K or Up Arrow
    binde = , k, resizeactive, 0 -10
    binde = , up, resizeactive, 0 -10
    # Physical: Tap J or Down Arrow
    binde = , j, resizeactive, 0 10
    binde = , down, resizeactive, 0 10

    # Resize active window (large increments with CTRL)
    # Physical: (Hold F) + Tap H or Left Arrow
    binde = CTRL, h, resizeactive, -30 0
    binde = CTRL, left, resizeactive, -30 0
    # Physical: (Hold F) + Tap L or Right Arrow
    binde = CTRL, l, resizeactive, 30 0
    binde = CTRL, right, resizeactive, 30 0
    # Physical: (Hold F) + Tap K or Up Arrow
    binde = CTRL, k, resizeactive, 0 -30
    binde = CTRL, up, resizeactive, 0 -30
    # Physical: (Hold F) + Tap J or Down Arrow
    binde = CTRL, j, resizeactive, 0 30
    binde = CTRL, down, resizeactive, 0 30
    # Exit resize_mode
    # Physical: Tap Escape or any unassigned key
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- swap_mode Submap ---
submap = swap_mode
    # Swap window left
    # Physical: Tap H or Left Arrow
    bind = , h, swapwindow, l
    bind = , left, swapwindow, l
    # Swap window right
    # Physical: Tap L or Right Arrow
    bind = , l, swapwindow, r
    bind = , right, swapwindow, r
    # Swap window up
    # Physical: Tap K or Up Arrow
    bind = , k, swapwindow, u
    bind = , up, swapwindow, u
    # Swap window down
    # Physical: Tap J or Down Arrow
    bind = , j, swapwindow, d
    bind = , down, swapwindow, d
    # Exit swap_mode
    # Physical: Tap Escape or any unassigned key
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- workspace_mode Submap ---
submap = workspace_mode
    # Switch to specific workspace
    # Physical: Tap 1-0
    bind = , 1, workspace, 1
    bind = , 2, workspace, 2
    bind = , 3, workspace, 3
    bind = , 4, workspace, 4
    bind = , 5, workspace, 5
    bind = , 6, workspace, 6
    bind = , 7, workspace, 7
    bind = , 8, workspace, 8
    bind = , 9, workspace, 9
    bind = , 0, workspace, 10

    # Move active window to specific workspace
    # Physical: (Hold D) + Tap 1-0
    bind = SHIFT, 1, movetoworkspace, 1
    bind = SHIFT, 2, movetoworkspace, 2
    bind = SHIFT, 3, movetoworkspace, 3
    bind = SHIFT, 4, movetoworkspace, 4
    bind = SHIFT, 5, movetoworkspace, 5
    bind = SHIFT, 6, movetoworkspace, 6
    bind = SHIFT, 7, movetoworkspace, 7
    bind = SHIFT, 8, movetoworkspace, 8
    bind = SHIFT, 9, movetoworkspace, 9
    bind = SHIFT, 0, movetoworkspace, 10

    # Switch to next/previous workspace
    # Physical: Tap L or Right Arrow
    bind = , l, workspace, e+1
    bind = , right, workspace, e+1
    # Physical: Tap H or Left Arrow
    bind = , h, workspace, e-1
    bind = , left, workspace, e-1

    bind = SHIFT, l, movetoworkspace, e+1
    bind = SHIFT, right, movetoworkspace, e+1
    # Physical: (Hold D) + Tap H or Left Arrow
    bind = SHIFT, h, movetoworkspace, e-1
    bind = SHIFT, left, movetoworkspace, e-1
    # Exit workspace_mode
    # Physical: Tap Escape or any unassigned key
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- quit_mode Submap ---
submap = quit_mode
    # Quit Hyprland
    # Physical: Tap Q
    bind = , q, exec, hyprctl dispatch exit
    # Poweroff system
    # Physical: Tap P
    bind = , p, exec, systemctl poweroff
    # Reboot system
    # Physical: Tap R
    bind = , r, exec, systemctl reboot
    # Suspend system
    # Physical: Tap S
    bind = , s, exec, systemctl suspend
    # Lock screen
    # Physical: Tap L
    bind = , l, exec, hyprlock
    # Exit quit_mode
    # Physical: Tap Escape or any unassigned key
    bind = , Escape, submap, reset
    bind = , catchall, submap, reset

# --- dwindle_mode Submap (Standalone for direct access if needed, though core_mod has some) ---
submap = dwindle_mode
    # Toggle split direction
    # Physical: Tap S
    bind = , s, layoutmsg, togglesplit
    # Swap split
    # Physical: Tap E
    bind = , e, layoutmsg, swapsplit
    # Preselect left
    # Physical: Tap Q or Left Arrow
    bind = , q, layoutmsg, preselect l
    bind = , left, layoutmsg, preselect l
    # Preselect right
    # Physical: Tap W or Right Arrow
    bind = , w, layoutmsg, preselect r
    bind = , right, layoutmsg, preselect r
    # Preselect top
    # Physical: Tap A or Up Arrow
    bind = , a, layoutmsg, preselect t
    bind = , up, layoutmsg, preselect t
    # Preselect bottom
    # Physical: Tap D or Down Arrow
    bind = , d, layoutmsg, preselect b
    bind = , down, layoutmsg, preselect b
    # Move to root (Dwindle specific)
    # Physical: Tap R
    bind = , r, layoutmsg, movetoroot
    # Exit dwindle_mode, return to core_mod
    # Physical: Tap Escape or any unassigned key
    bind = , Escape, submap, core_mod
    bind = , catchall, submap, core_mod

########################################
#           SUBMAP RESET             #
########################################

# This submap ensures that pressing any unassigned key or Escape in any
# submap will revert to the default (no submap active) state.
submap = reset
